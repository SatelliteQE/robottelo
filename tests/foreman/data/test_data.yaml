config:
  populators:
    api:
      module: robottelo.populate.api.APIPopulator
    cli:
      module: robottelo.populate.cli.CLIPopulator

vars:
  admin_username: admin
  admin_password: changeme
  org_list:
    - company7
    - company8

entities:

  - model: Organization
    register: default_orgs
    via: api
    data:
      name: Org{{item}}
      label: Org{{item}}
    with_items: org_list
    validate_fields:
      name: Org{{item}}
      label: Org{{item}}

  - model: User
    register: default_users
    data:
      firstname: user{{item}}
      login: user{{item}}
      mail: user{{item}}@acme.com
      password: "123456"
      organization:
          from_registry: default_orgs
      default_organization:
          from_registry: default_orgs[loop_index]
    with_items:
      - user7
      - user8

#  - model: Repository
#    data:
#      url:
#        from_object: robottelo.constants.FAKE_REPO_1
#      thing: "{{ gen_string }}"
#      name:
#        from_search:
#          term: bla

